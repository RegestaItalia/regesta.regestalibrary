<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>helper/ModelHelper.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="regesta.regestalibrary.helper.DateHelper.html">DateHelper</a><ul class='methods'><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.addDays">addDays</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.addHours">addHours</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.addMinutes">addMinutes</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.addMonths">addMonths</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.addSeconds">addSeconds</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.addTime">addTime</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.addYears">addYears</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.endOfMonth">endOfMonth</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.removeTimeZoneOffset">removeTimeZoneOffset</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.DateHelper.html#.startOfMonth">startOfMonth</a></li></ul></li><li><a href="regesta.regestalibrary.helper.JsHelper.html">JsHelper</a><ul class='methods'><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.checkParameters">checkParameters</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.createObjectByPath">createObjectByPath</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.getObjectByPath">getObjectByPath</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.getObjectPropertyByIndex">getObjectPropertyByIndex</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.parseFormattedNumber">parseFormattedNumber</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.parseXml">parseXml</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.replaceByIndex">replaceByIndex</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.JsHelper.html#.typeOf">typeOf</a></li></ul></li><li><a href="regesta.regestalibrary.helper.MessageHelper.html">MessageHelper</a><ul class='methods'><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.addErrorMessages">addErrorMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.addInformationMessages">addInformationMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.addMessages">addMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.addSuccessMessages">addSuccessMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.addWarningMessages">addWarningMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.getErrorMessages">getErrorMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.getInformationMessages">getInformationMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.getMessages">getMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.getSuccessMessages">getSuccessMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.getUntypedMessages">getUntypedMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.getWarningMessages">getWarningMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.registerView">registerView</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.removeErrorMessages">removeErrorMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.removeInformationMessages">removeInformationMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.removeMessages">removeMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.removeSuccessMessages">removeSuccessMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.removeUntypedMessages">removeUntypedMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.removeWarningMessages">removeWarningMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.showErrorMessages">showErrorMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.showInformationMessages">showInformationMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.showMessages">showMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.showSuccessMessages">showSuccessMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.showUntypedMessages">showUntypedMessages</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.MessageHelper.html#.showWarningMessages">showWarningMessages</a></li></ul></li><li><a href="regesta.regestalibrary.helper.ModelHelper.html">ModelHelper</a><ul class='methods'><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.ajax">ajax</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.ajaxAsync">ajaxAsync</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.callFunction">callFunction</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.callFunctionAsync">callFunctionAsync</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.create">create</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.createAsync">createAsync</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.formalizePostData">formalizePostData</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.formatResponseMessage">formatResponseMessage</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getDefaultModel">getDefaultModel</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getEntityFilterableProperties">getEntityFilterableProperties</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getEntityMetadata">getEntityMetadata</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getEntitySetEntityMetadata">getEntitySetEntityMetadata</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getEntitySetMetadata">getEntitySetMetadata</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getFunctionImportMetadata">getFunctionImportMetadata</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getI18nBundle">getI18nBundle</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getI18nModel">getI18nModel</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getLocalModel">getLocalModel</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.getModel">getModel</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.httpError">httpError</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.parseResponse">parseResponse</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.read">read</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.readAsync">readAsync</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.remove">remove</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.removeAsync">removeAsync</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.setBindedProperty">setBindedProperty</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.setBindingContextProperty">setBindingContextProperty</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.update">update</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.ModelHelper.html#.updateAsync">updateAsync</a></li></ul></li><li><a href="regesta.regestalibrary.helper.NavigationHelper.html">NavigationHelper</a><ul class='methods'><li data-type='method'><a href="regesta.regestalibrary.helper.NavigationHelper.html#.afterNavigation">afterNavigation</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.NavigationHelper.html#.getRouter">getRouter</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.NavigationHelper.html#.navigate">navigate</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.NavigationHelper.html#.navigateExternal">navigateExternal</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.NavigationHelper.html#.navigateHierarchy">navigateHierarchy</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.NavigationHelper.html#.navigateToLaunchpad">navigateToLaunchpad</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.NavigationHelper.html#.overrideShellBack">overrideShellBack</a></li></ul></li><li><a href="regesta.regestalibrary.helper.UiHelper.html">UiHelper</a><ul class='methods'><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.enableRowSelection">enableRowSelection</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.focusInput">focusInput</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getAppName">getAppName</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getAppVersion">getAppVersion</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getContentDensity">getContentDensity</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getCurrentLanguage">getCurrentLanguage</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getCustomData">getCustomData</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getDialog">getDialog</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getElementsByPartialId">getElementsByPartialId</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getFieldGroupId">getFieldGroupId</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getFocusedElement">getFocusedElement</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getInputByName">getInputByName</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getInputsByFieldGroupId">getInputsByFieldGroupId</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getLibraryVersion">getLibraryVersion</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getNextField">getNextField</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getParentOfType">getParentOfType</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getStartupParameters">getStartupParameters</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getUi5ByDom">getUi5ByDom</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getUrlParameters">getUrlParameters</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.getViewName">getViewName</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.reload">reload</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.setUrlParameterss">setUrlParameterss</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.showBusy">showBusy</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.showDialog">showDialog</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.showErrorDialog">showErrorDialog</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.showInformationDialog">showInformationDialog</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.showQuestionDialog">showQuestionDialog</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.showSuccessDialog">showSuccessDialog</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.showWarningDialog">showWarningDialog</a></li><li data-type='method'><a href="regesta.regestalibrary.helper.UiHelper.html#.translateFilterData">translateFilterData</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="regesta.regestalibrary.control.html">control</a></li><li><a href="regesta.regestalibrary.enum.html">enum</a></li><li><a href="regesta.regestalibrary.helper.html">helper</a></li><li><a href="regesta.regestalibrary.type.html">type</a></li></ul><h3>Global</h3><ul><li><a href="global.html#capitalizeString">capitalizeString</a></li><li><a href="global.html#Day">Day</a></li><li><a href="global.html#goFullScreen">goFullScreen</a></li><li><a href="global.html#Hour">Hour</a></li><li><a href="global.html#lowerizeString">lowerizeString</a></li><li><a href="global.html#Minute">Minute</a></li><li><a href="global.html#Month">Month</a></li><li><a href="global.html#Second">Second</a></li><li><a href="global.html#Year">Year</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">helper/ModelHelper.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** 
 * Model related helper functions.
 * 
 * @class regesta.regestalibrary.helper.ModelHelper
 * @memberof regesta.regestalibrary.helper
 * @hideconstructor
 */

sap.ui.define([
	"regesta/regestalibrary/helper/JsHelper",
	"regesta/regestalibrary/helper/MessageHelper",
	"regesta/regestalibrary/helper/UiHelper"
], function (JsHelper, MessageHelper, UiHelper) {
	"use strict";

	var createCallersMesages = function (targets, url, error) {
		var messages = targets.reduce(function (acc, curr) {
			if (curr.getModel) {
				acc.push({
					message: error,
					processor: curr.getModel(),
					target: curr.getContext() ? curr.getContext() + "/" + curr.getPath() : curr.getPath()
				});
			}

			return acc;
		}, []);

		if (messages.length === 0) {
			messages.push({
				message: error
			});
		}

		return messages;
	};

	return {
		/** 
		 * Executes an ajax call.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n		The i18n model for parsing the response.
		 * @param	{string}								url			The url to call.
		 * @param	{object}								options		Additional options for the http call. Refer to {@link http://api.jquery.com/jquery.ajax/} to see the full option list.
		 * @param	{array}									[callers]	An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 */
		ajax: function (i18n, url, options, callers) {
			JsHelper.checkParameters("ajax", [{
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}, {
				name: "url",
				value: url,
				expected: ["string"]
			}]);

			options = options || {};
			callers = callers || [];
			callers = JsHelper.typeOf(callers) === "array" ? callers : [callers];

			options.method = options.method || "GET";
			options.type = options.type || "GET";

			var busyBindings = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("busy");

				acc.push(binding);

				return acc;
			}, []);
			var messageTargets = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("value");

				acc.push(binding);

				return acc;
			}, []);

			UiHelper.showBusy(busyBindings);
			MessageHelper.removeMessages(messageTargets.length === 0 ? [] : {
				targets: messageTargets.reduce(function (acc, curr) {
					if (curr.getPath) {
						acc.push(curr.getPath());
					}

					return acc;
				}, [])
			});

			$.ajax(url, {
				accepts: options.accepts,
				async: options.async,
				beforeSend: options.beforeSend,
				cache: options.cache,
				complete: options.complete,
				contents: options.contents,
				contentType: options.contentType,
				context: options.context,
				converters: options.converters,
				crossDomain: options.crossDomain,
				data: options.data,
				dataFilter: options.dataFilter,
				dataType: options.dataType,
				global: options.global,
				headers: options.headers,
				ifModified: options.ifModified,
				isLocal: options.isLocal,
				jsonp: options.jsonp,
				jsonpCallback: options.jsonpCallback,
				method: options.method,
				mimeType: options.mimeType,
				password: options.password,
				processData: options.processData,
				scriptCharset: options.scriptCharset,
				statusCode: options.statusCode,
				timeout: options.timeout,
				traditional: options.traditional,
				type: options.type,
				username: options.username,
				xhr: options.xhr,
				xhrFields: options.xhrFields,
				success: function (data) {
					UiHelper.showBusy(busyBindings, true);

					if (options.success) {
						options.success(data);
					}
				}.bind(this),
				error: function (response) {
					UiHelper.showBusy(busyBindings, true);

					var parsedResponse = this.httpError(response, i18n);

					MessageHelper.addErrorMessages(createCallersMesages(messageTargets, url, parsedResponse));

					if (options.error) {
						options.error(parsedResponse, response);
					}
				}.bind(this)
			});
		},
		/** 
		 * Wraps an ajax call into a promise.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n		The i18n model for parsing the response.
		 * @param	{string}								url			The url to call.
		 * @param	{object}								options		Additional options for the http call. Refer to {@link http://api.jquery.com/jquery.ajax/} to see the full option list (success and resolve won't be considered).
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 * 
		 * @returns	{Promise}											The resulting promise.
		 */
		ajaxAsync: function (i18n, url, options, callers) {
			return new Promise(function (resolve, reject) {
				options = options || {};
				options.success = resolve;
				options.error = reject;

				this.ajax(i18n, url, options, callers);
			}.bind(this));
		},
		/** 
		 * Triggers a request to a function import of the specified odata service.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The (relative) url of the function import.
		 * @param	{object}								[options]				Additional options for the http call.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{function}								options.success			The callback to be called when the request has successfully end execution.
		 * @param	{function}								options.error			The callback to be called when the request fails.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 */
		callFunction: function (model, i18n, url, options, callers) {
			JsHelper.checkParameters("callFuntion", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}, {
				name: "url",
				value: url,
				expected: ["string"]
			}]);

			var functionImportMetadata = this.getFunctionImportMetadata(model, url.substr(1));

			options = options || {};
			callers = callers || [];
			callers = JsHelper.typeOf(callers) === "array" ? callers : [callers];

			options.urlParameters = options.urlParameters || {};

			options.urlParameters = this.formalizePostData(options.urlParameters, functionImportMetadata);

			var busyBindings = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("busy");

				acc.push(binding);

				return acc;
			}, []);
			var messageTargets = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("value");

				acc.push(binding);

				return acc;
			}, []);

			if (messageTargets.length === 0) {
				messageTargets = [url];
			}

			UiHelper.showBusy(busyBindings);
			MessageHelper.removeMessages(messageTargets.length === 0 ? [] : {
				targets: messageTargets.reduce(function (acc, curr) {
					if (curr.getPath) {
						acc.push(curr.getPath());
					}

					return acc;
				}, [])
			});

			model.callFunction(url, {
				method: functionImportMetadata.httpMethod,
				urlParameters: options.urlParameters,
				headers: options.headers,
				groupId: options.groupId,
				success: function (data) {
					UiHelper.showBusy(busyBindings, true);

					if (options.success) {
						options.success(data[functionImportMetadata.name] || data.results || data);
					}
				}.bind(this),
				error: function (response) {
					UiHelper.showBusy(busyBindings, true);

					var parsedResponse = this.httpError(response, i18n);

					MessageHelper.addErrorMessages(createCallersMesages(messageTargets, url, parsedResponse));

					if (options.error) {
						options.error(parsedResponse, response);
					}
				}.bind(this)
			});
		},
		/** 
		 * Wraps a function import call into a promise.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The (relative) url of the function import.
		 * @param	{object}								[options]				Additional options for the http call.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 * 
		 * @returns	{Promise}														The resulting promise.
		 */
		callFunctionAsync: function (model, i18n, url, options, callers) {
			return new Promise(function (resolve, reject) {
				options = options || {};
				options.success = resolve;
				options.error = reject;

				this.callFunction(model, i18n, url, options, callers);
			}.bind(this));
		},
		/** 
		 * Triggers a create request to the specified odata service.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The entity to which the new entry should belong.
		 * @param	{object}								newData					The data for creating the entry.
		 * @param	{object}								[options]				Additional options for the http call.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{function}								options.success			The callback to be called when the request has successfully end execution.
		 * @param	{function}								options.error			The callback to be called when the request fails.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 */
		create: function (model, i18n, url, newData, options, callers) {
			JsHelper.checkParameters("create", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}, {
				name: "url",
				value: url,
				expected: ["string"]
			}, {
				name: "newData",
				value: newData,
				expected: ["object"]
			}]);

			var entitySetMetadata = this.getEntitySetMetadata(model, url.substr(1));
			var entityMetadata = this.getEntityMetadata(model, entitySetMetadata.entityType.split(".").pop());

			options = options || {};
			newData = this.formalizePostData(newData, entityMetadata);
			callers = callers || [];
			callers = JsHelper.typeOf(callers) === "array" ? callers : [callers];

			var busyBindings = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("busy");

				acc.push(binding);

				return acc;
			}, []);
			var messageTargets = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("value");

				acc.push(binding);

				return acc;
			}, []);

			if (messageTargets.length === 0) {
				messageTargets = [url];
			}

			UiHelper.showBusy(busyBindings);
			MessageHelper.removeMessages(messageTargets.length === 0 ? [] : {
				targets: messageTargets.reduce(function (acc, curr) {
					if (curr.getPath) {
						acc.push(curr.getPath());
					}

					return acc;
				}, [])
			});

			model.create(url, newData, {
				urlParameters: options.urlParameters,
				headers: options.headers,
				groupId: options.groupId,
				success: function (data) {
					UiHelper.showBusy(busyBindings, true);

					if (options.success) {
						options.success(data);
					}
				}.bind(this),
				error: function (response) {
					UiHelper.showBusy(busyBindings, true);

					var parsedResponse = this.httpError(response, i18n);

					MessageHelper.addErrorMessages(createCallersMesages(messageTargets, url, parsedResponse));

					if (options.error) {
						options.error(parsedResponse, response);
					}
				}.bind(this)
			});
		},
		/** 
		 * Wraps a create request into a promise.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The entity to which the new entry should belong.
		 * @param	{object}								newData					The data for creating the entry.
		 * @param	{object}								[options]				Additional options for the http call.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 * 
		 * @returns	{promise}														The resulting promise.
		 */
		createAsync: function (model, i18n, url, newData, options, callers) {
			return new Promise(function (resolve, reject) {
				options = options || {};
				options.success = resolve;
				options.error = reject;

				this.create(model, i18n, url, newData, options, callers);
			}.bind(this));
		},
		/** 
		 * Formalize an object properties basing on the metadata defining an odata entity, in order to be used for a create/update odata request.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{object}	postData		The data to be formalized.
		 * @param	{object}	metadata		The metadata of the entity to be created/updated or the functionImport to be called.
		 * 
		 * @returns {object}	The formalized data.
		 */
		formalizePostData: function (postData, metadata) {
			JsHelper.checkParameters("formalizePostData", [{
				name: "postData",
				value: postData,
				expected: ["object"]
			}, {
				name: "metadata",
				value: metadata,
				expected: ["object"]
			}]);

			Object.keys(postData).forEach(function (property) {
				var propertyMetadata = (metadata.property || metadata.parameter).find(function (item) {
					return item.name === property;
				});

				if (propertyMetadata &amp;&amp; postData[property] !== undefined &amp;&amp; postData[property] !== null) {
					var type = JsHelper.typeOf(postData[property]);

					switch (propertyMetadata.type) {
					case "Edm.Decimal":
						postData[property] = JsHelper.parseFormattedNumber(postData[property] * 1).toString();
						break;
					case "Edm.Int16":
					case "Edm.Int32":
					case "Edm.Int64":
						postData[property] = JsHelper.parseFormattedNumber(postData[property]);
						break;
					case "Edm.String":
						if (type === "object" || type === "array") {
							postData[property] = JSON.stringify(postData[property]);
						} else {
							postData[property] = (postData[property] || "").toString();
						}
					}
				}
			}.bind(this));

			return postData;
		},
		/**
		 * Formats a response message. Use "|" to separate message parameters (e.g. message|p1|p2|..pn).
		 * Parameter type and formatOptions can be specified respectively with &amp;type=... and &amp;formatOptions=... 
		 * (e.g. message|p1&amp;type=sap.ui.model.Integer|p2&amp;type=sap.ui.model.type.Float&amp;formatOptions={"decimals":3}).
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{string}								responseMessage	The message to be formatted.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n			The i18n model for parsing the message.
		 * 
		 * @returns {string}												The formatted message.
		 */
		formatResponseMessage: function (responseMessage, i18n) {
			JsHelper.checkParameters("formatResponseMessage", [{
				name: "responseMessage",
				value: responseMessage,
				expected: ["string"]
			}, {
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}]);
			
			if(responseMessage.endsWith(".")){
				responseMessage = responseMessage.substr(0, responseMessage.length - 1);
			}

			var key = responseMessage.split("|")[0];
			var parameters = responseMessage.split("|").slice(1);

			parameters = parameters.map(function (parameter) {
				var parameterParts = parameter.split("&amp;");

				if (parameterParts.length > 1) {
					var value = parameterParts.find(function (parts) {
						return !parts.includes("type") &amp;&amp; !parts.includes("formatOptions");
					});
					var type = parameterParts.find(function (parts) {
						return parts.includes("type");
					});
					var formatOptions = parameterParts.find(function (parts) {
						return parts.includes("formatOptions");
					});

					if (type) {
						type = type.replace("type=", "");
					}
					if (formatOptions) {
						formatOptions = JSON.parse(formatOptions.replace("formatOptions=", ""));
					}

					if (type &amp;&amp; formatOptions) {
						var formatter = new(JsHelper.getObjectByPath(type, "."))(formatOptions);

						return formatter.formatValue(value, "string");
					}

					return value;
				}

				return parameter;
			});

			var message = i18n.getResourceBundle().getText(key, parameters);

			return message;
		},
		/**
		 * Shorthand: calls getModel and returns the context's default model.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 */
		getDefaultModel: function (context) {
			var model = this.getModel(context);

			return model;
		},
		/**
		 * Returns the filterable properties of an entity
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{object}	entityMetadata	The metadata of the entity
		 * 
		 * @returns	{array}	An array containing the filterable properties of the entity
		 */
		getEntityFilterableProperties: function (entityMetadata) {
			JsHelper.checkParameters("getEntityFilterableProperties", [{
				name: "entityMetadata",
				value: entityMetadata,
				expected: ["object"]
			}]);

			var filterableProperties = entityMetadata.property.filter(function (property) {
				return !property.extensions.find(function (extension) {
					return extension.name === "filterable" &amp;&amp; extension.value === "false";
				});
			});

			return filterableProperties;
		},
		/**
		 * Returns the metadata of the given entityName.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}	model		The odata model of the service to call.
		 * @param	{string}							entityName	The entity of which searching the metadata.
		 * 
		 * @returns	{object} The entity metadata.
		 */
		getEntityMetadata: function (model, entityName) {
			JsHelper.checkParameters("getEntityMetadata", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "entityName",
				value: entityName,
				expected: ["string"]
			}]);

			var metadata = model.getServiceMetadata();
			var entityMetadata = metadata.dataServices.schema[0].entityType.find(function (entityType) {
				return entityType.name === entityName;
			});

			return entityMetadata;
		},
		/**
		 * Returns the entity metadata of the given entitySet name.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}	model			The odata model of the service to call.
		 * @param	{string}							entitySetName	The entity of which searching the metadata.
		 * 
		 * @returns	{object} The entitySet entity metadata.
		 */
		getEntitySetEntityMetadata: function (model, entitySetName) {
			JsHelper.checkParameters("getEntitySetEntityMetadata", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "entitySetName",
				value: entitySetName,
				expected: ["string"]
			}]);

			var metadata = model.getServiceMetadata();
			var entitySetMetadata = metadata.dataServices.schema[0].entityContainer[0].entitySet.find(function (entitySet) {
				return entitySet.name === entitySetName;
			});
			var entityMetadata = this.getEntityMetadata(model, entitySetMetadata.entityType.split(".")[1]);

			return entityMetadata;
		},
		/**
		 * Returns the metadata of the given entitySet name.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}	model			The odata model of the service to call.
		 * @param	{string}							entitySetName	The entity of which searching the metadata.
		 * 
		 * @returns	{object} The entitySet metadata.
		 */
		getEntitySetMetadata: function (model, entitySetName) {
			JsHelper.checkParameters("getEntityMetadata", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "entitySetName",
				value: entitySetName,
				expected: ["string"]
			}]);

			var metadata = model.getServiceMetadata();
			var entitySetMetadata = metadata.dataServices.schema[0].entityContainer[0].entitySet.find(function (entitySet) {
				return entitySet.name === entitySetName;
			});

			return entitySetMetadata;
		},
		/**
		 * Returns the metadata of the functionImport with the given name.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}	model				The odata model of the service to call.
		 * @param	{string}							functionImportName	The entity of which searching the metadata.
		 * 
		 * @returns	{object} The functionImport metadata.
		 */
		getFunctionImportMetadata: function (model, functionImportName) {
			JsHelper.checkParameters("getEntityMetadata", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "functionImportName",
				value: functionImportName,
				expected: ["string"]
			}]);

			var metadata = model.getServiceMetadata();
			var FunctionImportMetadata = metadata.dataServices.schema[0].entityContainer[0].functionImport.find(function (functionImport) {
				return functionImport.name === functionImportName;
			});

			return FunctionImportMetadata;
		},
		/**
		 * Shorthand: calls getModel and returns context's 1i8n model's resourceBundle.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 */
		getI18nBundle: function (context) {
			var bundle = this.getI18nModel(context).getResourceBundle();

			return bundle;
		},
		/**
		 * Shorthand: calls getModel and returns the context's 1i8n model.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 */
		getI18nModel: function (context) {
			var model = this.getModel(context, "i18n");

			return model;
		},
		/**
		 * Shorthand: calls getModel and returns the context's local model.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 */
		getLocalModel: function (context) {
			var model = this.getModel(context, "local");

			return model;
		},
		/**
		 * Returns the model with the given name.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.core.mvc.Controller}	context The context in which searching the model.
		 * @param	{string}						name	The name of the model.
		 * 
		 * @returns {sap.ui.model.odata.v2.ODataModel|sap.ui.model.json.JSONModel|sap.base.i18n.ResourceBundle}	The found model.
		 */
		getModel: function (context, name) {
			JsHelper.checkParameters("getModel", [{
				name: "context",
				value: context,
				expected: ["sap.ui.core.mvc.Controller"]
			}]);

			var model = context.getView().getModel(name);

			return model;
		},
		/** 
		 * Extracts the exception message from an HTTP request's error response. 
		 * If the message in the response is translatable (and therefore coincide with the key of an entry in the i18n file), the error will be considered as a "business error", otherwise a "technical error".
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{httpError}								response	The object containing additional informations of an erroneous HTTP call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n		The i18n model for parsing the response.
		 * 
		 * @returns	{object}											An object containing the message of the error and a boolean value indicating whether the error is of type business.
		 *																In case of technical error the message will be the concatenation of status code, status text (if significant) and message, otherwise the translated text will be shown.
		 */
		httpError: function (response, i18n) {
			JsHelper.checkParameters("httpError", [{
				name: "response",
				value: response,
				expected: ["object"]
			}, {
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}]);

			var message;

			response = this.parseResponse(response);
			message = response.statusCode === 0 ? response.statusText : this.formatResponseMessage(response.message, i18n);

			if (message === response.message) {
				if (response.statusText === "error") {
					message = response.statusCode + " - " + response.message;
				} else {
					message = response.statusCode + " - " + (response.statusText || "") + "\n" + response.message;
				}
			}

			return message;
		},
		/** 
		 * Extracts statusCode, statusText and message from an HTTP resuest's response.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{object}	response	The response.
		 * 
		 * @returns {object}				An object containing statusCode, statusText and message of the response.
		 */
		parseResponse: function (response) {
			JsHelper.checkParameters("parseResponse", [{
				name: "response",
				value: response,
				expected: ["object"]
			}]);

			var message = "";
			var status = 0;

			try {
				try {
					// response is json
					message = JSON.parse(response.responseText);

					if (JsHelper.typeOf(message) !== "string") {
						message = JSON.parse(response.responseText).Message;
					}

					if (JsHelper.typeOf(message) !== "string") {
						message = JSON.parse(response.responseText).error.message.value;
					}
				} catch (exc) {
					// response is xml
					message = JsHelper.parseXml(response.responseText || response.statusText, "message");

					if (message.split("-").length > 1) {
						message = message.split("-")[1].slice(1);
					}
				}
			} catch (exc) {
				message = "";
			}

			try {
				status = response.statusCode * 1 || response.status * 1;
			} catch (exc) {
				status = -1;
			}

			return {
				statusCode: status,
				statusText: status > 0 ? response.statusText || "error" : "No response",
				message: status > 0 ? message || "Generic error" : ""
			};
		},
		/** 
		 * Triggers a read request to the specified odata service.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n resourceBundle for parsing the response.
		 * @param	{string}								url						The entity to read.
		 * @param	{object}								[options]				Additional options for the http call.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{array}									options.filters			An array of sap.ui.model.Filter.
		 * @param	{array}									options.sorters			An array of sap.ui.model.Sorter.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{function}								options.success			The callback to be called when the request has successfully end execution.
		 * @param	{function}								options.error			The callback to be called when the request fails.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 */
		read: function (model, i18n, url, options, callers) {
			JsHelper.checkParameters("read", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}, {
				name: "url",
				value: url,
				expected: ["string"]
			}]);

			options = options || {};
			callers = callers || [];
			callers = JsHelper.typeOf(callers) === "array" ? callers : [callers];

			var busyBindings = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("busy");

				acc.push(binding);

				return acc;
			}, []);
			var messageTargets = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("value");

				acc.push(binding);

				return acc;
			}, []);

			if (messageTargets.length === 0) {
				messageTargets = [url];
			}

			UiHelper.showBusy(busyBindings);
			MessageHelper.removeMessages(messageTargets.length === 0 ? [] : {
				targets: messageTargets.reduce(function (acc, curr) {
					if (curr.getPath) {
						acc.push(curr.getPath());
					}

					return acc;
				}, [])
			});

			model.read(url, {
				urlParameters: options.urlParameters,
				filters: options.filters,
				sorters: options.sorters,
				groupId: options.groupId,
				success: function (data) {
					UiHelper.showBusy(busyBindings, true);

					if (options.success) {
						options.success(data.results || data); // getEntitySet / getEntity
					}
				}.bind(this),
				error: function (response) {
					UiHelper.showBusy(busyBindings, true);

					var parsedResponse = this.httpError(response, i18n);

					MessageHelper.addErrorMessages(createCallersMesages(messageTargets, url, parsedResponse));

					if (options.error) {
						options.error(parsedResponse, response);
					}
				}.bind(this)
			});
		},
		/** 
		 * Wraps a read request into a promise.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The entity to read.
		 * @param	{object}								[options]				Additional options for the http call.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{array}									options.filters			An array of sap.ui.model.Filter.
		 * @param	{array}									options.sorters			An array of sap.ui.model.Sorter.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 * 
		 * @returns	{Promise}														The resulting promise.
		 */
		readAsync: function (model, i18n, url, options, callers) {
			return new Promise(function (resolve, reject) {
				options = options || {};
				options.success = resolve;
				options.error = reject;

				this.read(model, i18n, url, options, callers);
			}.bind(this));
		},
		/** 
		 * Triggers a remove request to the specified odata service.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The path of the entry to be removed.
		 * @param	{object}								[options]				Additional options for deletion.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{function}								options.success			The callback to be called when the request has successfully end execution.
		 * @param	{function}								options.error			The callback to be called when the request fails.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 */
		remove: function (model, i18n, url, options, callers) {
			JsHelper.checkParameters("remove", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}, {
				name: "url",
				value: url,
				expected: ["string"]
			}]);

			options = options || {};
			callers = callers || [];
			callers = JsHelper.typeOf(callers) === "array" ? callers : [callers];

			var busyBindings = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("busy");

				acc.push(binding);

				return acc;
			}, []);
			var messageTargets = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("value");

				acc.push(binding);

				return acc;
			}, []);

			if (messageTargets.length === 0) {
				messageTargets = [url];
			}

			UiHelper.showBusy(busyBindings);
			MessageHelper.removeMessages(messageTargets.length === 0 ? [] : {
				targets: messageTargets.reduce(function (acc, curr) {
					if (curr.getPath) {
						acc.push(curr.getPath());
					}

					return acc;
				}, [])
			});

			model.remove(url, {
				urlParameters: options.urlParameters,
				headers: options.headers,
				groupId: options.groupId,
				success: function (data) {
					UiHelper.showBusy(busyBindings, true);

					if (options.success) {
						options.success(data);
					}
				}.bind(this),
				error: function (response) {
					UiHelper.showBusy(busyBindings, true);

					var parsedResponse = this.httpError(response, i18n);

					MessageHelper.addErrorMessages(createCallersMesages(messageTargets, url, parsedResponse));

					if (options.error) {
						options.error(parsedResponse, response);
					}
				}.bind(this)
			});
		},
		/** 
		 * Wraps a remove request into a promise.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The path of the entry to be removed.
		 * @param	{object}								[options]				Additional options for deletion.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{array} 								[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 * 
		 * @returns	{Promise}														The resulting promise.
		 */
		removeAsync: function (model, i18n, url, options, callers) {
			return new Promise(function (resolve, reject) {
				options = options || {};
				options.success = resolve;
				options.error = reject;

				this.remove(model, i18n, url, options, callers);
			}.bind(this));
		},
		/**
		 * Sets a property in a model, basing on given control property's biningInfo.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.core.Control}	control		The source control.
		 * @param	{string}				property	The control property.
		 * @param	{*}						[value]
		 */
		setBindedProperty: function (control, property, value) {
			JsHelper.checkParameters("setBindedProperty", [{
				name: "control",
				value: control,
				expected: ["sap.ui.core.Control"]
			}, {
				name: "property",
				value: property,
				expected: ["string"]
			}]);

			var binding = control.getBinding(property);
			var bindingContext = binding.getContext();
			var bindingModel = binding.getModel();
			var bindingPath = binding.getPath();

			bindingModel.setProperty(bindingContext ? bindingContext + "/" + bindingPath : bindingPath, value);
		},
		/**
		 * Sets a property in given bindingContext.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.Context}	bindingContext	The bindingContext.
		 * @param	{string}				property		The property to be set.
		 * @param	{*}						[value]			The value of the property.
		 */
		setBindingContextProperty: function (bindingContext, property, value) {
			JsHelper.checkParameters("setBindingContextProperty", [{
				name: "bindingContext",
				value: bindingContext,
				expected: ["sap.ui.model.Context"]
			}, {
				name: "property",
				value: property,
				expected: ["string"]
			}]);

			var bindingModel = bindingContext.getModel();
			var bindingPath = bindingContext.getPath();

			bindingModel.setProperty(JsHelper.replaceByIndex("{0}/{1}", [bindingPath, property]), value);
		},
		/** 
		 * Triggers an update request to the specified odata service.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The path of the entry to be updated.
		 * @param	{object}								newData					The data for updating the entry.
		 * @param	{object}								[options]				Additional options for the function import.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{function}								options.success			The callback to be called when the request has successfully end execution.
		 * @param	{function}								options.error			The callback to be called when the request fails.
		 * @param	{array}									[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 */
		update: function (model, i18n, url, newData, options, callers) {
			JsHelper.checkParameters("update", [{
				name: "model",
				value: model,
				expected: ["sap.ui.model.odata.v2.ODataModel"]
			}, {
				name: "i18n",
				value: i18n,
				expected: ["sap.ui.model.resource.ResourceModel"]
			}, {
				name: "url",
				value: url,
				expected: ["string"]
			}, {
				name: "newData",
				value: newData,
				expected: ["object"]
			}]);

			var entitySetMetadata = this.getEntitySetMetadata(model, url.substr(1));
			var entityMetadata = this.getEntityMetadata(model, entitySetMetadata.entityType.split(".").pop());

			options = options || {};
			newData = this.formalizePostData(newData, entityMetadata);
			callers = callers || [];
			callers = JsHelper.typeOf(callers) === "array" ? callers : [callers];

			var busyBindings = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("busy");

				acc.push(binding);

				return acc;
			}, []);
			var messageTargets = callers.reduce(function (acc, curr) {
				var binding = curr.getBinding("value");

				acc.push(binding);

				return acc;
			}, []);

			if (messageTargets.length === 0) {
				messageTargets = [url];
			}

			UiHelper.showBusy(busyBindings);
			MessageHelper.removeMessages(messageTargets.length === 0 ? [] : {
				targets: messageTargets.reduce(function (acc, curr) {
					if (curr.getPath) {
						acc.push(curr.getPath());
					}

					return acc;
				}, [])
			});

			model.update(url, newData, {
				urlParameters: options.urlParameters,
				headers: options.headers,
				groupId: options.groupId,
				success: function (data) {
					UiHelper.showBusy(busyBindings, true);

					if (options.success) {
						options.success(data);
					}
				}.bind(this),
				error: function (response) {
					UiHelper.showBusy(busyBindings, true);

					var parsedResponse = this.httpError(response, i18n);

					MessageHelper.addErrorMessages(createCallersMesages(messageTargets, url, parsedResponse));

					if (options.error) {
						options.error(parsedResponse, response);
					}
				}.bind(this)
			});
		},
		/** 
		 * Wraps an update request in a promise.
		 * 
		 * @memberof regesta.regestalibrary.helper.ModelHelper
		 * 
		 * @param	{sap.ui.model.odata.v2.ODataModel}		model					The odata model of the service to call.
		 * @param	{sap.ui.model.resource.ResourceModel}	i18n					The i18n model for parsing the response.
		 * @param	{string}								url						The path of the entry to be updated.
		 * @param	{object}								newData					The data for updating the entry.
		 * @param	{object}								[options]				Additional options for the function import.
		 * @param	{object}								options.urlParameters	An object containing the parameters that will be passed as query strings.
		 * @param	{object}								options.headers			An object of headers for this request.
		 * @param	{string}								options.groupId			The id of the batch to which the request shoiìuld be bundled.
		 * @param	{array} 								[callers]				An array of sap.ui.core.control from which determine value and busy bindings to use during the call.
		 * 
		 * @returns {Promise}														The resulting promise.
		 */
		updateAsync: function (model, i18n, url, newData, options, callers) {
			return new Promise(function (resolve, reject) {
				options = options || {};
				options.success = resolve;
				options.error = reject;

				this.update(model, i18n, url, newData, options, callers);
			}.bind(this));
		}
	};
});</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Nov 24 2020 17:02:37 GMT+0200 (Israel Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
